---
layout: default
title: Resources
---
<div class="container mx-auto px-6 py-12">
    <h1 class="text-4xl font-bold mb-8 dark:text-white">Resources</h1>
    <div class="overflow-x-auto">
        <table class="min-w-full bg-white dark:bg-gray-800 rounded-lg overflow-hidden">
            <thead class="text-lg bg-gray-100 dark:bg-gray-900 transition-colors ">
                <tr>
                    <th class="px-6 py-3 text-left text-gray-700 dark:text-gray-200 w-1/2">Event Name</th>
                    <th class="px-6 py-3 text-center text-gray-700 dark:text-gray-200 w-1/2">Resources</th>
                </tr>
            </thead>
            <tbody id="resources-body" class="divide-y divide-gray-100 dark:divide-gray-600">
                <tr>
                    <td colspan="2" class="px-6 py-4 text-center text-gray-500 dark:text-gray-400">Loading resources...
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        loadEventResources();
    });

    async function loadEventResources() {
        try {
            // Get the events data from Jekyll
            const eventsWithResources = [];

            {% for event in site.data.events %}
                {% if event.resources %}
                    eventsWithResources.push({
                        id: "{{ event.id }}",
                        name: "{{ event.name }}",
                        resources: {
                            {% if event.resources.empty_slides %}
                                empty_slides: "{{ event.resources.empty_slides }}",
                            {% endif %}
                            {% if event.resources.filled_slides %}
                                filled_slides: "{{ event.resources.filled_slides }}",
                            {% endif %}
                            {% if event.resources.recording %}
                                recording: "{{ event.resources.recording }}"
                            {% endif %}
                        }
                    });
                {% endif %}
            {% endfor %}

    // Create a map to store API responses by event ID
    const eventDetailsMap = {};

    // First, start all API requests in parallel for events without names
    const apiRequests = eventsWithResources
        .filter(event => !event.name && event.id) // Only fetch for events without names
        .map(async event => {
            try {
                const response = await fetch(`https://core.acm.illinois.edu/api/v1/events/${event.id}`);
                if (response.ok) {
                    const eventDetails = await response.json();
                    // Store the result in our map
                    eventDetailsMap[event.id] = eventDetails;
                }
            } catch (error) {
                console.error(`Error fetching details for event ${event.id}:`, error);
            }
        });

    // Wait for all API requests to complete
    await Promise.all(apiRequests);

    // Now process all events with the API data we've collected
    const eventsWithDetails = eventsWithResources.map(event => {
        // Check if we have API data for this event
        const apiData = event.id ? eventDetailsMap[event.id] : null;

        // Determine the title (prioritize existing name, then API data, then fallback)
        const title = event.name || (apiData ? apiData.title : null) || 'Unknown Event';

        return {
            ...event,
            title: title,
            calendarLink: event.id ? `https://www.acm.illinois.edu/calendar?id=${event.id}&host=Academic+Committee` : null
        };
    });

    // Render the events table
    renderResourcesTable(eventsWithDetails);
        } catch (error) {
        console.error('Error loading resources:', error);
        document.getElementById('resources-body').innerHTML = `
                <tr>
                    <td colspan="2" class="px-6 py-4 text-center text-red-500">
                        Failed to load resources. Please try again later.
                    </td>
                </tr>
            `;
    }
    }

    function renderResourcesTable(events) {
        const resourcesBody = document.getElementById('resources-body');

        if (!events || events.length === 0) {
            resourcesBody.innerHTML = `
                <tr>
                    <td colspan="2" class="px-6 py-4 text-center text-gray-500 dark:text-gray-400">
                        No resources available.
                    </td>
                </tr>
            `;
            return;
        }

        // Create table rows for each event
        resourcesBody.innerHTML = events.map(event => {
            return `
                <tr class="text-gray-900 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-600 bg-white dark:bg-gray-700 transition-colors ">
                    <td class="px-6 py-4 dark:text-gray-200">
                        ${event.calendarLink
                    ? `<a href="${event.calendarLink}" target="_blank" class="hover:underline text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300">${event.title}</a>`
                    : event.title
                }
                    </td>
                    <td class="px-6 py-4">
                        <div class="flex flex-wrap justify-center gap-4">
                            ${generateResourceIcons(event.resources)}
                        </div>
                    </td>
                </tr>
            `;
        }).join('');
    }

    function generateResourceIcons(resources) {
        const icons = [];

        if (resources.empty_slides) {
            icons.push(`
                <a href="${resources.empty_slides}" 
                    class="text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors "
                    title="Empty Slides">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                        <path fill="currentColor" d="M6 22q-.825 0-1.412-.587T4 20V4q0-.825.588-1.412T6 2h8l6 6v12q0 .825-.587 1.413T18 22zm7-13V4H6v16h12V9zM6 4v5zv16z" />
                    </svg>
                </a>
            `);
        }

        if (resources.filled_slides) {
            icons.push(`
                <a href="${resources.filled_slides}"
                    class="text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 transition-colors "
                    title="Filled Slides">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                            <path fill="currentColor" d="m10.95 18l5.65-5.65l-1.45-1.45l-4.225 4.225l-2.1-2.1L7.4 14.45zM6 22q-.825 0-1.412-.587T4 20V4q0-.825.588-1.412T6 2h8l6 6v12q0 .825-.587 1.413T18 22zm7-13V4H6v16h12V9zM6 4v5zv16z" />
                        </svg>
                </a>
            `);
        }

        if (resources.recording) {
            icons.push(`
                <a href="${resources.recording}"
                    class="text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors "
                    title="Recording">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                        <path fill="currentColor" d="M4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h12q.825 0 1.413.588T18 6v4.5l4-4v11l-4-4V18q0 .825-.587 1.413T16 20zm0-2h12V6H4zm0 0V6z" />
                    </svg>
                </a>
            `);
        }

        if (icons.length === 0) {
            return '<span class="text-gray-500 dark:text-gray-400">No resources available</span>';
        }

        return icons.join('');
    }
</script>